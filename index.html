<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Walmart — AI Grocery Assistant (VoxTalk Embed)</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="color-scheme" content="light" />
<style>
/* Walmart blue + spark yellow */
:root{
  --wm-blue:#0071ce;
  --spark:#ffd100;
}

/* Reset */
*,*::before,*::after{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  min-height:100svh; overflow:hidden;
  font:16px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:#e9ecef;
}

/* Optional background Walmart mock (delete if not wanted) */
.bg{position:fixed; inset:0; z-index:1; overflow:hidden; background:#e9ecef}
.bg>picture,.bg>img{display:block; width:100vw; height:100svh}
#mock{width:100%; height:100%; object-fit:cover; object-position:center top}

/* --- ROUND BUTTON --- */
.launcher{
  position:fixed; top:16px; left:16px; z-index:5;
  width:56px; height:56px; border-radius:50%;
  background:var(--wm-blue); box-shadow:0 6px 14px rgba(0,0,0,.25);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; user-select:none; transition:transform .15s ease;
}
.launcher:hover{transform:scale(1.05)}
.spark{
  width:20px; height:20px; border-radius:50%;
  background:var(--spark);
  box-shadow:0 0 0 2px rgba(255,255,255,.7) inset;
}

/* --- OVERLAY PANEL --- */
.overlay{
  position:fixed; inset:0; z-index:10; display:none;
  background:rgba(0,0,0,.45); backdrop-filter:blur(6px);
}
.panel{
  position:absolute; inset:0;
  background:#fff; display:flex; flex-direction:column;
}
.panel-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; background:var(--wm-blue); color:#fff;
  font-weight:900; font-size:18px;
}
.close{
  background:transparent; color:#fff; border:0; font-size:24px;
  line-height:1; cursor:pointer; padding:4px 10px;
}
.panel-body{flex:1; position:relative; background:#fff}
iframe{
  position:absolute; inset:0; width:100%; height:100%;
  border:0; background:#fff;
}

/* Fallback message */
.fallback{
  position:absolute; inset:0; display:none;
  align-items:center; justify-content:center; text-align:center; padding:24px;
}
.fallback a{
  display:inline-block; margin-top:12px; padding:12px 16px;
  background:var(--wm-blue); color:#fff; border-radius:12px;
  text-decoration:none; font-weight:900;
}
</style>
</head>
<body>

<!-- Optional static Walmart screenshot background -->
<div class="bg">
  <picture>
    <source srcset="walmart_mock_mobile.png?v=2" media="(max-width:768px)">
    <img id="mock" src="walmart_mock_.png?v=22" alt="">
  </picture>
</div>

<!-- ROUND BUTTON top-left -->
<div class="launcher" id="wmLaunch" title="Talk to VoxTalk">
  <div class="spark" aria-hidden="true"></div>
</div>

<!-- FULLSCREEN OVERLAY with VoxTalk -->
<div class="overlay" id="overlay" aria-hidden="true">
  <div class="panel" role="dialog" aria-modal="true" aria-label="VoxTalk Assistant">
    <div class="panel-header">
      Walmart — AI Grocery Assistant
      <button class="close" id="closeBtn" aria-label="Close">×</button>
    </div>
    <div class="panel-body">
      <iframe id="voxFrame"
        src="https://walmart-business-example.onrender.com/?src=vox-launch"
        allow="microphone; autoplay; clipboard-read; clipboard-write"
        referrerpolicy="no-referrer"
        title="VoxTalk Walmart Assistant"></iframe>

      <div class="fallback" id="fallback">
        <div>
          <h3>Open Walmart AI in a new tab</h3>
          <p>If the assistant doesn’t appear, your browser blocked embedding.</p>
          <a href="https://walmart-business-example.onrender.com/?src=vox-newtab"
             target="_blank" rel="noopener">Open Walmart AI</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const overlay  = document.getElementById('overlay');
const wmLaunch = document.getElementById('wmLaunch');
const closeBtn = document.getElementById('closeBtn');
const voxFrame = document.getElementById('voxFrame');
const fallback = document.getElementById('fallback');

function openOverlay(){
  overlay.style.display='block';
  overlay.setAttribute('aria-hidden','false');
  // fallback if iframe blocked
  fallback.style.display='none';
  const check=setTimeout(()=>{fallback.style.display='flex';},3500);
  voxFrame.addEventListener('load',()=>{clearTimeout(check);},{once:true});
}
function closeOverlay(){
  overlay.style.display='none';
  overlay.setAttribute('aria-hidden','true');
}
wmLaunch.addEventListener('click',openOverlay);
closeBtn.addEventListener('click',closeOverlay);
overlay.addEventListener('click',(e)=>{if(e.target===overlay)closeOverlay();});
document.addEventListener('keydown',(e)=>{if(e.key==='Escape')closeOverlay();});
</script>

</body>
</html>
